<rules xmlns="http://namespaces.plone.org/diazo" xmlns:css="http://namespaces.plone.org/diazo/css" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:template match="@*|node()">
      <xsl:copy>
        <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
    </xsl:template>

    <!-- Add navigation tree classes to event navigation, making it look like plone's portal navigation -->
    <xsl:template match="//*[@class = 'event-navigation']/div/ul">
        <dl class="portlet portletNavigationTree"> 
            <dd class="portletItem lastItem">
                <xsl:copy>
                    <xsl:apply-templates select="@*"/>
                    <xsl:attribute name="class">
                        <xsl:value-of select="'navTree navTreeLevel0'"/>
                    </xsl:attribute>
                    <xsl:apply-templates select="node()"/>
                </xsl:copy>
            </dd>
        </dl>
    </xsl:template>

    <xsl:template match="//*[@class = 'event-navigation']/div/ul/li">
        <xsl:copy>
            <xsl:apply-templates select="@*"/>
            <xsl:attribute name="class">
                <xsl:value-of select="'navTreeItem visualNoMarker navTreeFolderish'"/>
            </xsl:attribute>
            <xsl:apply-templates select="node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="//a[contains(@class, 'event-navigation-link')]/@class">
        <xsl:attribute name="class">
            <xsl:value-of select="str:replace(str:replace(., 'event-navigation-link', ''), 'selected', 'navTreeCurrentNode navTreeCurrentItem')"/>
        </xsl:attribute>
    </xsl:template>

    <!-- Add a visual clear after the event-text for the floating -->
    <xsl:template match="//*[@class = 'event-text']">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
        <div class="visualClear"></div>
    </xsl:template>

    <!-- Remove the responsiveness -->
    <xsl:template match="//div[contains(@class, 'responsive-events')]/@class">
        <xsl:attribute name="class">
            <xsl:value-of select="str:replace(., 'responsive-events', '')"/>
        </xsl:attribute>
    </xsl:template>    
</rules>

 